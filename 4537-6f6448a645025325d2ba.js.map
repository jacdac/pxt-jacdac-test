{"version":3,"file":"4537-6f6448a645025325d2ba.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA2D;;AAE3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,aAAa;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,UAAU,kBAAQ,aAAa,kBAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG,WAAW,iBAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE,yBAAe;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE,yBAAe;AACjB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;ACtRA,uDACA,kCAOA;AAEA;AAQA,GAAMA,CAAAA,uBAAuB,cAAGC,cAAI,CAChC,IAAM,6KAD0B,CAApC,CAIA,GAAMC,CAAAA,iBAAiB,CAAGC,0BAAM,CAANA,sBAAM,CAANA,CAAgB,UAAC,CAAD,KAAC,EAAD,WAAgB,CACtD,aAAc,CACVC,KAAK,CAAEC,KAAK,CAALA,OAAAA,CAAAA,KAAAA,CAF2C,IACxC,CADwC,CAItD,eAAgB,CACZC,eAAe,CAAED,KAAK,CAALA,OAAAA,CAAAA,KAAAA,CADL,KAEZD,KAAK,CAAEC,KAAK,CAALA,OAAAA,CAAAA,MAAAA,CAFK,MAGZE,SAAS,CAAEF,KAAK,CAALA,OAAAA,CAHC,CAGDA,CAHC,CAIZG,QAAQ,CAAEH,KAAK,CAALA,UAAAA,CAAAA,KAAAA,CARwB,QAItB,CAJsC,CAAhB,CAA1C,CAA0BF,CAA1B,CAYe,kCAWZ,CACC,GAAM,4FAQFM,SAAS,CARP,4BAAN,MAYA,GAAM,WAAeC,oBAAU,CAA/B,+BAA+B,CAA/B,CACA,GAAML,CAAAA,KAAK,CAAIM,QAAQ,GAARA,MAAAA,CAAAA,qBAAAA,CAAf,uBACA,GAAMC,CAAAA,SAAS,CAAGC,gBAAM,CAAxB,IAAwB,CAAxB,CAEAC,WAAW,oBAAsB,CAC7BC,QAAQ,CAAE,CAAC,CADkB,SAE7BC,WAAW,CAFfF,CAAiC,CAAtB,CAAXA,CAIA,mBACI,0CAAM,SAAS,CAAf,KAAgB,OAAO,CAAvB,EAA4B,SAAS,CAArC,oBACI,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,qFAEI,IAAI,CAFR,KAGI,QAAQ,CAHZ,SAII,KAAK,CAJT,QAMK,WAAC,wBAAD,aAAC,EAAD,yBACG,2BACI,GAAG,CADP,UAEI,SAAS,CAFb,UAGI,UAAU,CAHd,MAII,KAAK,yBAEDG,OAAO,CAFN,6BAKDC,UAAU,CALT,WAMDC,YAAY,CAVpB,YAIS,EAJT,EAaKC,MAAM,CAANA,GAAAA,CAAW,UAAa,CACrB,GAAMC,CAAAA,UAAU,CAAGC,WAAH,OAAGA,EAAAA,WAAH,SAAGA,CAAH,MAAGA,CAAAA,WAAW,CAAXA,IAAAA,CACfC,CAAC,EAAIA,CAAC,CAADA,IAAAA,GAAWC,CAAC,CADrB,CAAmBF,CAAnB,CAGA,GAAMG,CAAAA,KAAK,CAAGJ,UAAH,OAAGA,EAAAA,UAAH,SAAGA,CAAH,MAAGA,CAAAA,UAAU,CAAxB,QACA,GAAMK,CAAAA,EAAE,cACJ,4BACI,GAAG,CADP,EAEI,KAAK,CACDL,UAAU,EAAI,CACVM,YAAY,CAJxB,gBAGsB,CAHtB,EAQKC,IAAI,CAAJA,MAAAA,CACWC,KAAK,EAAI,CAACA,KAAK,CAD1BD,KAAAA,EAAAA,GAAAA,CAEQ,0BACD,2BACQE,aAAa,CAAC,OAZlC,GAYkC,CAAD,CADrB,CAHPF,CARL,CAkBKJ,CAAC,CAAGJ,MAAM,CAANA,MAAAA,CAAJI,CAAAA,CAAAA,IAAAA,CAnBT,IACI,CADJ,CAsBA,MAAOC,CAAAA,KAAK,cACR,uCACI,KAAK,CADT,MAEI,KAAK,CAFT,KAGI,GAAG,CAHP,GADQ,EACR,CADQ,CAAZ,GAzCX,CAcQL,CAbL,CADH,CARb,CAEQ,CADJ,CADJ,CAiEK,CAAC,EAACE,WAAD,OAACA,EAAAA,WAAD,SAACA,EAAAA,WAAW,CAAb,MAAC,CAAD,eACG,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,0CAAO,QAAQ,CAAf,SACKA,WAAW,CAAXA,MAAAA,GAAAA,CAAAA,CAAAA,aACG,gDACUA,WAAW,CAAXA,CAAW,CAAXA,CADV,aAEKA,WAAW,CAAXA,CAAW,CAAXA,CAHRA,OACG,CADHA,CAAAA,aAMG,8BACKA,WAAW,CAAXA,GAAAA,CAAgB,oBACb,0BAAI,GAAG,CAAP,WACUC,CAAC,CADX,UACoBA,CAAC,CA7EjD,OA4E4B,CADHD,CADL,CAPR,CADJ,CAlER,CAqFKS,gBAAgB,EAAhBA,eAAAA,EAAAA,aACG,0CAAM,IAAI,CAAV,mBACI,8DACI,6CACI,KAAK,CADT,iBAEI,IAAI,CAFR,gBAGI,WAAW,CAHf,uBAII,KAAK,CAAE,CACH,CAACC,eAAe,CAAhB,OA9F5B,IA6F+B,CAJX,EADJ,CADJ,CAtFR,CADJ,CAsGH;;;;ACtKD;AACA;AAwBA,0BAIG,CACC,GAAM,oBAAN,MACA,GAAM,uBAAsBC,kBAAQ,CAApC,EAAoC,CAApC,CACA,GAAMC,CAAAA,IAAI,CAAGC,uBAAY,CAAzB,MAAyB,CAAzB,CAEA,GAAMC,CAAAA,YAAY,sEAAG,WAAY,CAC7B,KAAMC,CAAAA,OAAO,CAAPA,kBAAAA,CAA2BC,wDAA3BD,CAAuD,CACzDE,IAAI,CAAJA,SAAAA,CADJ,IACIA,CADyD,CAAvDF,CAAN,CADc,SAAZD,SAAAA,CAAAA,YAAAA,EAAY,qCAAlB,CAAkB,EAAlB,CAMA,mBACI,qDACI,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,wCACI,IAAI,CADR,OAEI,QAAQ,CAFZ,OAGI,QAAQ,CALpB,SAEQ,EADJ,CADJ,cAQI,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,0CAAM,SAAS,CAAf,KAAgB,OAAO,CAAvB,EAA4B,SAAS,CAArC,oBACI,0CAAM,IAAI,CAAV,mBACI,8CACI,OAAO,CADX,WAEI,OAAO,CAFX,aAGI,QAAQ,CAAE,YAAcF,IAAI,GAHhC,WAZpB,QAYoB,CADJ,CADJ,CADJ,CARJ,CADJ,CA0BJ,CAAe,qCAA6D,CACxE,GAAM,mBAAN,MAEA,GAAMM,CAAAA,iBAAiB,CAAGC,8BAAW,SAAUC,sDAAV,CAArC,CACA,GAAMC,CAAAA,sBAAsB,CAAGF,8BAAW,SAEtCC,gEAFsC,CAA1C,CAIA,GAAME,CAAAA,SAAS,CAAGC,iDAAoB,mBAAtC,KAAsC,CAAtC,CACA,GAAM,iBAAmBC,qDAAwB,wBAAjD,KAAiD,CAAjD,CAIA,GAAMC,CAAAA,MAAM,CAAGC,mCAAgB,SAE3B,IAAM,GAFV,8CAEU,EAFqB,CAA/B,CAIA,GAAM5C,CAAAA,KAAK,CAAG2C,MAAM,aAApB,UAEA,GAAM,mBAAkBd,kBAAQ,CAAhC,EAAgC,CAAhC,CAEAgB,mBAAS,CAAC,IAAMC,OAAO,CAAd,EAAc,CAAd,CAAoB,CAA7BD,iBAA6B,CAApB,CAATA,CACAA,mBAAS,CACL,IACIF,MADJ,OACIA,EAAAA,MADJ,SACIA,CADJ,MACIA,CAAAA,MAAM,CAANA,SAAAA,CAAAA,sCAAAA,CAEKI,GAAD,EAAwC,CACpCD,OAAO,CAACE,IAAI,EAAI,sDAAUD,GAAG,CAAb,aAA0B,CAA1CD,EAAgB,CAAT,CAAPA,CALP,CAEDH,CAFC,CAQL,CARJE,MAQI,CARK,CAATA,CAWA,GAAMI,CAAAA,eAAe,CAAGN,MAAM,CACxB,IAAM,CACFA,MAAM,CAANA,SAAAA,CAAmB,CAACA,MAAM,CAA1BA,SAAAA,CACAP,iBAAiB,CAAjBA,eAAAA,GAHoB,EAA9B,UAMA,GAAII,SAAS,GAAb,UACI,mBAAO,mEAAgC,QAAQ,CAA/C,iBAAO,EAAP,CAEJ,mBACI,0CAAM,SAAS,CAAf,KAAgB,OAAO,CAAvB,GACKU,cAAc,eACX,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,+CAAY,OAAO,CAAnB,WAHZ,cAGY,CADJ,CAFR,cAMI,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,oDACI,OAAO,CADX,UAEI,KAAK,CAFT,YAGI,QAAQ,CAAE,SAAWP,MAAM,CAH/B,WAII,KAAK,CAJT,MAKI,QAAQ,CAZpB,eAOQ,EADJ,CANJ,CAeK,CAAC,EAACQ,IAAD,OAACA,EAAAA,IAAD,SAACA,EAAAA,IAAI,CAAN,MAAC,CAAD,eACG,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,2BAAK,KAAK,CAAE,CAAErC,UAAU,CAAZ,WAA0BV,QAAQ,CAA9C,KAAY,CAAZ,EACK+C,IAAI,CAAJA,IAAAA,CAlBjB,IAkBiBA,CADL,CADJ,CAhBR,CAsBKC,QAAQ,eACL,gCACI,OAAO,CADX,QAEI,MAAM,CAFV,OAGI,SAAS,CA3BzB,SAwBY,EAvBR,CADJ,CAgCH","sources":["webpack://jacdac-docs/./node_modules/use-editable/dist/use-editable.es.js","webpack://jacdac-docs/./src/components/ui/HighlightTextField.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardCloudAdapter.tsx"],"sourcesContent":["import { useState, useMemo, useLayoutEffect } from \"react\";\n\nvar m = {\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n};\n\nfunction p(c) {\n  var a = window.getSelection();\n  a.empty();\n  a.addRange(c);\n}\n\nfunction q(c) {\n  return (c.metaKey || c.ctrlKey) && !c.altKey && \"KeyZ\" === c.code;\n}\n\nfunction r(c) {\n  c = [ c.firstChild ];\n  for (var b, a = \"\"; b = c.pop(); ) {\n    b.nodeType === Node.TEXT_NODE ? a += b.textContent : b.nodeType === Node.ELEMENT_NODE && \"BR\" === b.nodeName && (a += \"\\n\"), \n    b.nextSibling && c.push(b.nextSibling), b.firstChild && c.push(b.firstChild);\n  }\n  \"\\n\" !== a[a.length - 1] && (a += \"\\n\");\n  return a;\n}\n\nfunction w(c) {\n  var a = window.getSelection().getRangeAt(0), b = a.collapsed ? 0 : a.toString().length, f = document.createRange();\n  f.setStart(c, 0);\n  f.setEnd(a.startContainer, a.startOffset);\n  return {\n    position: c = (f = f.toString()).length,\n    extent: b,\n    content: f = (f = f.split(\"\\n\"))[a = f.length - 1],\n    line: a\n  };\n}\n\nfunction C(c, a, b) {\n  0 >= a && (a = 0);\n  if (!b || 0 > b) {\n    b = a;\n  }\n  var f = document.createRange();\n  c = [ c.firstChild ];\n  for (var d, l = 0, g = a; d = c[c.length - 1]; ) {\n    if (d.nodeType === Node.TEXT_NODE) {\n      if (l + d.textContent.length >= g) {\n        var h = g - l;\n        if (g === a) {\n          if (g = f, h < d.textContent.length ? g.setStart(d, h) : g.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          h < (b = d).textContent.length ? a.setEnd(b, h) : a.setEndAfter(b);\n          break;\n        }\n      }\n      l += d.textContent.length;\n    } else if (d.nodeType === Node.ELEMENT_NODE && \"BR\" === d.nodeName) {\n      if (l + 1 >= g) {\n        if (g === a) {\n          if (h = f, 0 < d.textContent.length ? h.setStart(d, 0) : h.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          0 < (b = d).textContent.length ? a.setEnd(b, 0) : a.setEndAfter(b);\n          break;\n        }\n      }\n      l++;\n    }\n    c.pop();\n    d.nextSibling && c.push(d.nextSibling);\n    d.firstChild && c.push(d.firstChild);\n  }\n  return f;\n}\n\nexport function useEditable(c, a, b) {\n  function f(k) {\n    var b = c.current;\n    if (b) {\n      var a = w(b);\n      b = r(b);\n      a.position += k.length - b.length;\n      e.position = a;\n      e.onChange(k, a);\n    }\n  }\n  function l(k, b) {\n    var e = c.current;\n    if (e) {\n      var a = window.getSelection().getRangeAt(0);\n      a.deleteContents();\n      a.collapse();\n      var d = b || 0;\n      (a = C(e, b = (a = w(e)).position + (0 > d ? d : 0), a.position + (0 < d ? d : 0))).deleteContents();\n      k && a.insertNode(document.createTextNode(k));\n      p(C(e, b + k.length));\n    }\n  }\n  function d(b) {\n    var a = c.current;\n    if (a) {\n      a.focus();\n      var e = 0;\n      if (\"number\" == typeof b) {\n        e = b;\n      } else {\n        var k = r(a).split(\"\\n\").slice(0, b.row);\n        b.row && (e += k.join(\"\\n\").length + 1);\n        e += b.column;\n      }\n      p(C(a, e));\n    }\n  }\n  function g() {\n    var b = c.current;\n    return {\n      text: r(b),\n      position: b = w(b)\n    };\n  }\n  function h() {\n    e.observer.disconnect();\n  }\n  b || (b = {});\n  var D = useState([])[1], e = useState((function() {\n    var e = {\n      observer: null,\n      disconnected: !1,\n      onChange: a,\n      queue: [],\n      history: [],\n      historyAt: -1,\n      position: null\n    };\n    \"undefined\" != typeof MutationObserver && (e.observer = new MutationObserver((function b(b) {\n      var a;\n      (a = e.queue).push.apply(a, b);\n    })));\n    return e;\n  }))[0], n = useMemo((function() {\n    return {\n      update: f,\n      insert: l,\n      move: d,\n      getState: g\n    };\n  }), []);\n  if (\"object\" != typeof navigator) {\n    return n;\n  }\n  useLayoutEffect((function() {\n    e.onChange = a;\n    if (c.current && !b.disabled) {\n      e.disconnected = !1;\n      e.observer.observe(c.current, m);\n      if (e.position) {\n        var k = e.position, d = k.position;\n        p(C(c.current, d, d + k.extent));\n      }\n      return h;\n    }\n  }));\n  useLayoutEffect((function() {\n    if (!c.current || b.disabled) {\n      e.history.length = 0, e.historyAt = -1;\n    } else {\n      var a = c.current;\n      if (e.position) {\n        a.focus();\n        var d = e.position, f = d.position;\n        p(C(a, f, f + d.extent));\n      }\n      var g = a.style.whiteSpace, h = a.contentEditable, l = !0;\n      try {\n        a.contentEditable = \"plaintext-only\";\n      } catch (u) {\n        a.contentEditable = \"true\", l = !1;\n      }\n      \"pre\" !== g && (a.style.whiteSpace = \"pre-wrap\");\n      b.indentation && (a.style.tabSize = a.style.MozTabSize = \"\" + b.indentation);\n      d = \"\" + \" \".repeat(b.indentation || 0);\n      var x, E = new RegExp(\"^(?:\" + d + \")\"), F = new RegExp(\"^(?:\" + d + \")*(\" + d + \")$\"), t = function(b) {\n        if (c.current && e.position) {\n          var u = r(a), d = w(a), f = (new Date).valueOf(), g = e.history[e.historyAt];\n          !b && 500 > f - x || g && g[1] === u ? x = f : (b = ++e.historyAt, e.history[b] = [ d, u ], \n          e.history.splice(b + 1), 500 < b && (e.historyAt--, e.history.shift()));\n        }\n      }, v = function() {\n        var b;\n        (b = e.queue).push.apply(b, e.observer.takeRecords());\n        b = w(a);\n        if (e.queue.length) {\n          e.observer.disconnect();\n          e.disconnected = !0;\n          var d = r(a);\n          e.position = b;\n          for (var c, f; c = e.queue.pop(); ) {\n            null !== c.oldValue && (c.target.textContent = c.oldValue);\n            for (f = c.removedNodes.length - 1; 0 <= f; f--) {\n              c.target.insertBefore(c.removedNodes[f], c.nextSibling);\n            }\n            for (f = c.addedNodes.length - 1; 0 <= f; f--) {\n              c.addedNodes[f].parentNode && c.target.removeChild(c.addedNodes[f]);\n            }\n          }\n          e.onChange(d, b);\n        }\n      }, y = function(c) {\n        if (!c.defaultPrevented && c.target === a) {\n          if (e.disconnected) {\n            return c.preventDefault(), D([]);\n          }\n          if (q(c)) {\n            c.preventDefault(), c.shiftKey ? (c = ++e.historyAt, (c = e.history[c]) || (e.historyAt = e.history.length - 1)) : (c = --e.historyAt, \n            (c = e.history[c]) || (e.historyAt = 0)), c && (e.observer.disconnect(), e.disconnected = !0, \n            e.position = c[0], e.onChange(c[1], c[0]));\n          } else {\n            t();\n            if (\"Enter\" === c.key) {\n              c.preventDefault();\n              var d = w(a), f = /\\S/g.exec(d.content);\n              d = \"\\n\" + d.content.slice(0, f ? f.index : d.content.length);\n              n.insert(d);\n            } else if ((!l || b.indentation) && \"Backspace\" === c.key) {\n              c.preventDefault(), window.getSelection().getRangeAt(0).collapsed ? (d = w(a), d = F.exec(d.content), \n              n.insert(\"\", d ? -d[1].length : -1)) : n.insert(\"\", 0);\n            } else if (b.indentation && \"Tab\" === c.key) {\n              c.preventDefault();\n              f = (d = w(a)).position - d.content.length;\n              var g = r(a);\n              d = c.shiftKey ? g.slice(0, f) + d.content.replace(E, \"\") + g.slice(f + d.content.length) : g.slice(0, f) + (b.indentation ? \" \".repeat(b.indentation) : \"\\t\") + g.slice(f);\n              n.update(d);\n            }\n            c.repeat && v();\n          }\n        }\n      }, z = function(b) {\n        b.defaultPrevented || b.isComposing || (q(b) || t(), v(), a.focus());\n      }, A = function(b) {\n        e.position = window.getSelection().rangeCount && b.target === a ? w(a) : null;\n      }, B = function(a) {\n        a.preventDefault();\n        t(!0);\n        n.insert(a.clipboardData.getData(\"text/plain\"));\n        t(!0);\n        v();\n      };\n      document.addEventListener(\"selectstart\", A);\n      window.addEventListener(\"keydown\", y);\n      a.addEventListener(\"paste\", B);\n      a.addEventListener(\"keyup\", z);\n      return function() {\n        document.removeEventListener(\"selectstart\", A);\n        window.removeEventListener(\"keydown\", y);\n        a.removeEventListener(\"paste\", B);\n        a.removeEventListener(\"keyup\", z);\n        a.style.whiteSpace = g;\n        a.contentEditable = h;\n      };\n    }\n  }), [ c.current, b.disabled, b.indentation ]);\n  return n;\n}\n//# sourceMappingURL=use-editable.es.js.map\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/jsx-key */\nimport React, { useContext, useRef, lazy } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/vsLight\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./DarkModeContext\"\nimport { useEditable } from \"use-editable\"\nimport { Alert } from \"@mui/material\"\nimport { Grid, Tooltip } from \"@mui/material\"\nimport { styled } from \"@mui/material/styles\"\nimport Suspense from \"../ui/Suspense\"\nconst GithubPullRequestButton = lazy(\n    () => import(\"../buttons/GithubPullRequestButton\")\n)\n\nconst AnnotationTooltip = styled(Tooltip)(({ theme }) => ({\n    [`& .arrow`]: {\n        color: theme.palette.error.main,\n    },\n    [`& .tooltip`]: {\n        backgroundColor: theme.palette.error.main,\n        color: theme.palette.common.white,\n        boxShadow: theme.shadows[1],\n        fontSize: theme.typography.body2.fontSize,\n    },\n}))\n\nexport default function HighlightTextField(props: {\n    language: string\n    code: string\n    minHeight?: string\n    maxHeight?: string\n    onChange: (newValue: string) => void\n    annotations?: jdspec.Diagnostic[]\n    pullRequestTitle?: string\n    pullRequestPath?: string\n    pullRequestDescription?: string\n    disabled?: boolean\n}) {\n    const {\n        code,\n        onChange,\n        language,\n        annotations,\n        pullRequestTitle,\n        pullRequestPath,\n        pullRequestDescription,\n        minHeight = \"12rem\",\n        maxHeight,\n        disabled,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const editorRef = useRef(null)\n\n    useEditable(editorRef, onChange, {\n        disabled: !!disabled,\n        indentation: 4,\n    })\n    return (\n        <Grid container spacing={1} direction=\"row\">\n            <Grid item xs={12}>\n                <Highlight\n                    {...defaultProps}\n                    code={code}\n                    language={language as Language}\n                    theme={theme}\n                >\n                    {({ className, style, tokens, getTokenProps }) => (\n                        <pre\n                            ref={editorRef}\n                            className={className}\n                            spellCheck={false}\n                            style={{\n                                ...style,\n                                padding: \"0.5rem\",\n                                minHeight,\n                                maxHeight,\n                                whiteSpace: \"pre-wrap\",\n                                overflowWrap: \"break-word\",\n                            }}\n                        >\n                            {tokens.map((line, i) => {\n                                const annotation = annotations?.find(\n                                    a => a.line === i + 1\n                                )\n                                const title = annotation?.message\n                                const el = (\n                                    <span\n                                        key={i}\n                                        style={\n                                            annotation && {\n                                                borderBottom: \"dashed 1px red\",\n                                            }\n                                        }\n                                    >\n                                        {line\n                                            .filter(token => !token.empty)\n                                            .map((token, key) => (\n                                                <span\n                                                    {...getTokenProps({\n                                                        token,\n                                                        key,\n                                                    })}\n                                                />\n                                            ))}\n                                        {i < tokens.length - 1 ? \"\\n\" : null}\n                                    </span>\n                                )\n                                return title ? (\n                                    <AnnotationTooltip\n                                        title={title}\n                                        arrow\n                                        key={i}\n                                    >\n                                        {el}\n                                    </AnnotationTooltip>\n                                ) : (\n                                    el\n                                )\n                            })}\n                        </pre>\n                    )}\n                </Highlight>\n            </Grid>\n            {!!annotations?.length && (\n                <Grid item xs={12}>\n                    <Alert severity=\"error\">\n                        {annotations.length === 1 ? (\n                            <>\n                                line {annotations[0].line}:{\" \"}\n                                {annotations[0].message}\n                            </>\n                        ) : (\n                            <ul>\n                                {annotations.map((a, i) => (\n                                    <li key={i}>\n                                        line {a.line}: {a.message}\n                                    </li>\n                                ))}\n                            </ul>\n                        )}\n                    </Alert>\n                </Grid>\n            )}\n            {pullRequestTitle && pullRequestPath && (\n                <Grid item>\n                    <Suspense>\n                        <GithubPullRequestButton\n                            title={pullRequestTitle}\n                            head={pullRequestPath}\n                            description={pullRequestDescription}\n                            files={{\n                                [pullRequestPath + \".md\"]: code,\n                            }}\n                        />\n                    </Suspense>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { useEffect, useState } from \"react\"\nimport { Grid, Typography } from \"@mui/material\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport {\n    CloudAdapterServer,\n    CloudAdapterUploadJSONRequest,\n    UPLOAD_JSON,\n} from \"../../../jacdac-ts/src/servers/cloudadapterserver\"\nimport {\n    CloudAdapterCmd,\n    CloudAdapterReg,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport useRegister from \"../hooks/useRegister\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport SwitchWithLabel from \"../ui/SwitchWithLabel\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\nimport CmdButton from \"../CmdButton\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport HighlightTextField from \"../ui/HighlightTextField\"\nimport { JSONTryParse } from \"../../../jacdac-ts/src/jacdac\"\n\nfunction Controller(props: {\n    service: JDService\n    server: CloudAdapterServer\n    connected: boolean\n}) {\n    const { service, connected } = props\n    const [source, setSource] = useState(\"\")\n    const json = JSONTryParse(source)\n\n    const handleUpload = async () => {\n        await service.sendCmdPackedAsync(CloudAdapterCmd.UploadJson, [\n            JSON.stringify(json),\n        ])\n    }\n\n    return (\n        <>\n            <Grid item xs={12}>\n                <HighlightTextField\n                    code={source}\n                    language={\"json\"}\n                    onChange={setSource}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <Grid container spacing={1} direction=\"row\">\n                    <Grid item>\n                        <CmdButton\n                            variant=\"outlined\"\n                            onClick={handleUpload}\n                            disabled={!connected || json === undefined}\n                        >\n                            upload\n                        </CmdButton>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </>\n    )\n}\n\nexport default function DashboardCloudAdapter(props: DashboardServiceProps) {\n    const { service, expanded } = props\n\n    const connectedRegister = useRegister(service, CloudAdapterReg.Connected)\n    const connectionNameRegister = useRegister(\n        service,\n        CloudAdapterReg.ConnectionName\n    )\n    const connected = useRegisterBoolValue(connectedRegister, props)\n    const [connectionName] = useRegisterUnpackedValue<[string]>(\n        connectionNameRegister,\n        props\n    )\n    const server = useServiceServer<CloudAdapterServer>(\n        service,\n        () => new CloudAdapterServer()\n    )\n    const color = server ? \"secondary\" : \"primary\"\n\n    const [msgs, setMsgs] = useState<string[]>([])\n\n    useEffect(() => setMsgs([]), [connectedRegister])\n    useEffect(\n        () =>\n            server?.subscribe(\n                UPLOAD_JSON,\n                (req: CloudAdapterUploadJSONRequest) => {\n                    setMsgs(prev => [...prev, req.json].slice(-10))\n                }\n            ),\n        [server]\n    )\n\n    const handleConnected = server\n        ? () => {\n              server.connected = !server.connected\n              connectedRegister.scheduleRefresh()\n          }\n        : undefined\n    if (connected === undefined)\n        return <DashboardRegisterValueFallback register={connectedRegister} />\n\n    return (\n        <Grid container spacing={1}>\n            {connectionName && (\n                <Grid item xs={12}>\n                    <Typography variant=\"caption\">{connectionName}</Typography>\n                </Grid>\n            )}\n            <Grid item xs={12}>\n                <SwitchWithLabel\n                    checked={connected}\n                    label=\"connected\"\n                    readOnly={!server || server.controlled}\n                    color={color}\n                    onChange={handleConnected}\n                />\n            </Grid>\n            {!!msgs?.length && (\n                <Grid item xs={12}>\n                    <pre style={{ whiteSpace: \"pre-wrap\", fontSize: \"70%\" }}>\n                        {msgs.join(\"\\n\")}\n                    </pre>\n                </Grid>\n            )}\n            {expanded && (\n                <Controller\n                    service={service}\n                    server={server}\n                    connected={connected}\n                />\n            )}\n        </Grid>\n    )\n}\n"],"names":["GithubPullRequestButton","lazy","AnnotationTooltip","styled","color","theme","backgroundColor","boxShadow","fontSize","minHeight","useContext","darkMode","editorRef","useRef","useEditable","disabled","indentation","padding","whiteSpace","overflowWrap","tokens","annotation","annotations","a","i","title","el","borderBottom","line","token","getTokenProps","pullRequestTitle","pullRequestPath","useState","json","JSONTryParse","handleUpload","service","CloudAdapterCmd","JSON","connectedRegister","useRegister","CloudAdapterReg","connectionNameRegister","connected","useRegisterBoolValue","useRegisterUnpackedValue","server","useServiceServer","useEffect","setMsgs","req","prev","handleConnected","connectionName","msgs","expanded"],"sourceRoot":""}